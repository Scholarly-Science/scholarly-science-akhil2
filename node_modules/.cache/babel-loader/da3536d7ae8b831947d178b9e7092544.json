{"ast":null,"code":"import React, { Component } from 'react';\nimport sha256 from 'crypto-js/sha256';\nimport { useParams } from \"react-router-dom\";\nimport { verifyEmail } from \"../backend/apiconnector\";\n\nfunction Verification() {\n  const {\n    token\n  } = useParams();\n\n  if (localStorage.getItem(\"student-nation.com-activation\")) {\n    var lsread = JSON.parse(localStorage.getItem(\"student-nation.com-activation\"));\n    console.log(sha256(token).toString());\n\n    if (sha256(token).toString() === lsread.hash) {\n      verifyEmail(token).then(res => {\n        if (res.status === \"success\") {\n          localStorage.setItem(\"student-nation.com-tokens\", JSON.stringify(res.tokens));\n          localStorage.setItem(\"student-nation.com-user\", JSON.stringify(res.user));\n          localStorage.removeItem(\"student-nation.com-activation\");\n          window.location.replace(\"/dashboard/profile\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      alert(\"Invalid/Expired Link\");\n      window.location.replace(\"/signup\");\n    }\n  } else {\n    window.location.replace(\"/signup\");\n  }\n}\n\nexport default Verification;","map":{"version":3,"sources":["/Users/godambe/dhruv1584/internships/scholarly-science-akhil/src/components/signup/verification.js"],"names":["React","Component","sha256","useParams","verifyEmail","Verification","token","localStorage","getItem","lsread","JSON","parse","console","log","toString","hash","then","res","status","setItem","stringify","tokens","user","removeItem","window","location","replace","catch","err","alert"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AAEA,SAASC,WAAT,QAA4B,yBAA5B;;AAEA,SAASC,YAAT,GAAwB;AACpB,QAAM;AAAEC,IAAAA;AAAF,MAAYH,SAAS,EAA3B;;AACA,MAAGI,YAAY,CAACC,OAAb,CAAqB,+BAArB,CAAH,EAAyD;AACrD,QAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,+BAArB,CAAX,CAAb;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYX,MAAM,CAACI,KAAD,CAAN,CAAcQ,QAAd,EAAZ;;AACA,QAAGZ,MAAM,CAACI,KAAD,CAAN,CAAcQ,QAAd,OAA2BL,MAAM,CAACM,IAArC,EAA0C;AACtCX,MAAAA,WAAW,CAACE,KAAD,CAAX,CAAmBU,IAAnB,CAAwBC,GAAG,IAAI;AAC3B,YAAGA,GAAG,CAACC,MAAJ,KAAa,SAAhB,EAA0B;AACtBX,UAAAA,YAAY,CAACY,OAAb,CAAqB,2BAArB,EAAkDT,IAAI,CAACU,SAAL,CAAeH,GAAG,CAACI,MAAnB,CAAlD;AACAd,UAAAA,YAAY,CAACY,OAAb,CAAqB,yBAArB,EAAgDT,IAAI,CAACU,SAAL,CAAeH,GAAG,CAACK,IAAnB,CAAhD;AACAf,UAAAA,YAAY,CAACgB,UAAb,CAAwB,+BAAxB;AACAC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,oBAAxB;AACH;AACJ,OAPD,EAOGC,KAPH,CAOSC,GAAG,IAAI;AACZhB,QAAAA,OAAO,CAACC,GAAR,CAAYe,GAAZ;AACH,OATD;AAUH,KAXD,MAWK;AACDC,MAAAA,KAAK,CAAC,sBAAD,CAAL;AACAL,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,SAAxB;AACH;AACJ,GAlBD,MAkBK;AACDF,IAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,SAAxB;AACH;AACJ;;AACD,eAAerB,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport sha256 from 'crypto-js/sha256';\nimport { useParams } from \"react-router-dom\";\n\nimport { verifyEmail } from \"../backend/apiconnector\";\n\nfunction Verification() {\n    const { token } = useParams();\n    if(localStorage.getItem(\"student-nation.com-activation\")){\n        var lsread = JSON.parse(localStorage.getItem(\"student-nation.com-activation\"))\n        console.log(sha256(token).toString())\n        if(sha256(token).toString()===lsread.hash){\n            verifyEmail(token).then(res => {\n                if(res.status===\"success\"){\n                    localStorage.setItem(\"student-nation.com-tokens\", JSON.stringify(res.tokens))\n                    localStorage.setItem(\"student-nation.com-user\", JSON.stringify(res.user))\n                    localStorage.removeItem(\"student-nation.com-activation\")\n                    window.location.replace(\"/dashboard/profile\")\n                }\n            }).catch(err => {\n                console.log(err)\n            })\n        }else{\n            alert(\"Invalid/Expired Link\")\n            window.location.replace(\"/signup\")    \n        }\n    }else{\n        window.location.replace(\"/signup\")\n    }\n}\nexport default Verification; "]},"metadata":{},"sourceType":"module"}